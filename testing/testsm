#!/bin/sh

# Tests lots of small XY moves

title=`basename $0`
cd `dirname $0`/../bin

cat << EOF | ./gotestsh -t 0.01 -n 1 > outp
tpar 1 2 7
rpar 1 2 7
linear
pos
movew 0 1 0 0 0 0
movew 0.062791 0.998027 0 0 0 0
movew 0.125333 0.992115 0 0 0 0
movew 0.187381 0.982287 0 0 0 0
movew 0.248690 0.968583 0 0 0 0
movew 0.309017 0.951057 0 0 0 0
movew 0.368125 0.929776 0 0 0 0
movew 0.425779 0.904827 0 0 0 0
movew 0.481754 0.876307 0 0 0 0
movew 0.535827 0.844328 0 0 0 0
movew 0.587785 0.809017 0 0 0 0
movew 0.637424 0.770513 0 0 0 0
movew 0.684547 0.728969 0 0 0 0
movew 0.728969 0.684547 0 0 0 0
movew 0.770513 0.637424 0 0 0 0
movew 0.809017 0.587785 0 0 0 0
movew 0.844328 0.535827 0 0 0 0
movew 0.876307 0.481754 0 0 0 0
movew 0.904827 0.425779 0 0 0 0
movew 0.929776 0.368125 0 0 0 0
movew 0.951057 0.309017 0 0 0 0
movew 0.968583 0.248690 0 0 0 0
movew 0.982287 0.187381 0 0 0 0
movew 0.992115 0.125333 0 0 0 0
movew 0.998027 0.062791 0 0 0 0
movew 1.000000 0.000000 0 0 0 0
movew 0.998027 -0.062791 0 0 0 0
movew 0.992115 -0.125333 0 0 0 0
movew 0.982287 -0.187381 0 0 0 0
movew 0.968583 -0.248690 0 0 0 0
movew 0.951057 -0.309017 0 0 0 0
movew 0.929776 -0.368125 0 0 0 0
movew 0.904827 -0.425779 0 0 0 0
movew 0.876307 -0.481754 0 0 0 0
movew 0.844328 -0.535827 0 0 0 0
movew 0.809017 -0.587785 0 0 0 0
movew 0.770513 -0.637424 0 0 0 0
movew 0.728969 -0.684547 0 0 0 0
movew 0.684547 -0.728969 0 0 0 0
movew 0.637424 -0.770513 0 0 0 0
movew 0.587785 -0.809017 0 0 0 0
movew 0.535827 -0.844328 0 0 0 0
movew 0.481754 -0.876307 0 0 0 0
movew 0.425779 -0.904827 0 0 0 0
movew 0.368125 -0.929776 0 0 0 0
movew 0.309017 -0.951057 0 0 0 0
movew 0.248690 -0.968583 0 0 0 0
movew 0.187381 -0.982287 0 0 0 0
movew 0.125333 -0.992115 0 0 0 0
movew 0.062791 -0.998027 0 0 0 0
movew 0.000000 -1.000000 0 0 0 0
movew -0.062791 -0.998027 0 0 0 0
movew -0.125333 -0.992115 0 0 0 0
movew -0.187381 -0.982287 0 0 0 0
movew -0.248690 -0.968583 0 0 0 0
movew -0.309017 -0.951057 0 0 0 0
movew -0.368125 -0.929776 0 0 0 0
movew -0.425779 -0.904827 0 0 0 0
movew -0.481754 -0.876307 0 0 0 0
movew -0.535827 -0.844328 0 0 0 0
movew -0.587785 -0.809017 0 0 0 0
movew -0.637424 -0.770513 0 0 0 0
movew -0.684547 -0.728969 0 0 0 0
movew -0.728969 -0.684547 0 0 0 0
movew -0.770513 -0.637424 0 0 0 0
movew -0.809017 -0.587785 0 0 0 0
movew -0.844328 -0.535827 0 0 0 0
movew -0.876307 -0.481754 0 0 0 0
movew -0.904827 -0.425779 0 0 0 0
movew -0.929776 -0.368125 0 0 0 0
movew -0.951057 -0.309017 0 0 0 0
movew -0.968583 -0.248690 0 0 0 0
movew -0.982287 -0.187381 0 0 0 0
movew -0.992115 -0.125333 0 0 0 0
movew -0.998027 -0.062791 0 0 0 0
movew -1.000000 0.000000 0 0 0 0
movew -0.998027 0.062791 0 0 0 0
movew -0.992115 0.125333 0 0 0 0
movew -0.982287 0.187381 0 0 0 0
movew -0.968583 0.248690 0 0 0 0
movew -0.951057 0.309017 0 0 0 0
movew -0.929776 0.368125 0 0 0 0
movew -0.904827 0.425779 0 0 0 0
movew -0.876307 0.481754 0 0 0 0
movew -0.844328 0.535827 0 0 0 0
movew -0.809017 0.587785 0 0 0 0
movew -0.770513 0.637424 0 0 0 0
movew -0.728969 0.684547 0 0 0 0
movew -0.684547 0.728969 0 0 0 0
movew -0.637424 0.770513 0 0 0 0
movew -0.587785 0.809017 0 0 0 0
movew -0.535827 0.844328 0 0 0 0
movew -0.481754 0.876307 0 0 0 0
movew -0.425779 0.904827 0 0 0 0
movew -0.368125 0.929776 0 0 0 0
movew -0.309017 0.951057 0 0 0 0
movew -0.248690 0.968583 0 0 0 0
movew -0.187381 0.982287 0 0 0 0
movew -0.125333 0.992115 0 0 0 0
movew -0.062791 0.998027 0 0 0 0
movew 0.000000 1.000000 0 0 0 0
run
EOF

cat << EOF | ./gotestsh -t 0.01 -n 1 > outv
tpar 1 2 7
rpar 1 2 7
linear
vel
movew 0 1 0 0 0 0
movew 0.062791 0.998027 0 0 0 0
movew 0.125333 0.992115 0 0 0 0
movew 0.187381 0.982287 0 0 0 0
movew 0.248690 0.968583 0 0 0 0
movew 0.309017 0.951057 0 0 0 0
movew 0.368125 0.929776 0 0 0 0
movew 0.425779 0.904827 0 0 0 0
movew 0.481754 0.876307 0 0 0 0
movew 0.535827 0.844328 0 0 0 0
movew 0.587785 0.809017 0 0 0 0
movew 0.637424 0.770513 0 0 0 0
movew 0.684547 0.728969 0 0 0 0
movew 0.728969 0.684547 0 0 0 0
movew 0.770513 0.637424 0 0 0 0
movew 0.809017 0.587785 0 0 0 0
movew 0.844328 0.535827 0 0 0 0
movew 0.876307 0.481754 0 0 0 0
movew 0.904827 0.425779 0 0 0 0
movew 0.929776 0.368125 0 0 0 0
movew 0.951057 0.309017 0 0 0 0
movew 0.968583 0.248690 0 0 0 0
movew 0.982287 0.187381 0 0 0 0
movew 0.992115 0.125333 0 0 0 0
movew 0.998027 0.062791 0 0 0 0
movew 1.000000 0.000000 0 0 0 0
movew 0.998027 -0.062791 0 0 0 0
movew 0.992115 -0.125333 0 0 0 0
movew 0.982287 -0.187381 0 0 0 0
movew 0.968583 -0.248690 0 0 0 0
movew 0.951057 -0.309017 0 0 0 0
movew 0.929776 -0.368125 0 0 0 0
movew 0.904827 -0.425779 0 0 0 0
movew 0.876307 -0.481754 0 0 0 0
movew 0.844328 -0.535827 0 0 0 0
movew 0.809017 -0.587785 0 0 0 0
movew 0.770513 -0.637424 0 0 0 0
movew 0.728969 -0.684547 0 0 0 0
movew 0.684547 -0.728969 0 0 0 0
movew 0.637424 -0.770513 0 0 0 0
movew 0.587785 -0.809017 0 0 0 0
movew 0.535827 -0.844328 0 0 0 0
movew 0.481754 -0.876307 0 0 0 0
movew 0.425779 -0.904827 0 0 0 0
movew 0.368125 -0.929776 0 0 0 0
movew 0.309017 -0.951057 0 0 0 0
movew 0.248690 -0.968583 0 0 0 0
movew 0.187381 -0.982287 0 0 0 0
movew 0.125333 -0.992115 0 0 0 0
movew 0.062791 -0.998027 0 0 0 0
movew 0.000000 -1.000000 0 0 0 0
movew -0.062791 -0.998027 0 0 0 0
movew -0.125333 -0.992115 0 0 0 0
movew -0.187381 -0.982287 0 0 0 0
movew -0.248690 -0.968583 0 0 0 0
movew -0.309017 -0.951057 0 0 0 0
movew -0.368125 -0.929776 0 0 0 0
movew -0.425779 -0.904827 0 0 0 0
movew -0.481754 -0.876307 0 0 0 0
movew -0.535827 -0.844328 0 0 0 0
movew -0.587785 -0.809017 0 0 0 0
movew -0.637424 -0.770513 0 0 0 0
movew -0.684547 -0.728969 0 0 0 0
movew -0.728969 -0.684547 0 0 0 0
movew -0.770513 -0.637424 0 0 0 0
movew -0.809017 -0.587785 0 0 0 0
movew -0.844328 -0.535827 0 0 0 0
movew -0.876307 -0.481754 0 0 0 0
movew -0.904827 -0.425779 0 0 0 0
movew -0.929776 -0.368125 0 0 0 0
movew -0.951057 -0.309017 0 0 0 0
movew -0.968583 -0.248690 0 0 0 0
movew -0.982287 -0.187381 0 0 0 0
movew -0.992115 -0.125333 0 0 0 0
movew -0.998027 -0.062791 0 0 0 0
movew -1.000000 0.000000 0 0 0 0
movew -0.998027 0.062791 0 0 0 0
movew -0.992115 0.125333 0 0 0 0
movew -0.982287 0.187381 0 0 0 0
movew -0.968583 0.248690 0 0 0 0
movew -0.951057 0.309017 0 0 0 0
movew -0.929776 0.368125 0 0 0 0
movew -0.904827 0.425779 0 0 0 0
movew -0.876307 0.481754 0 0 0 0
movew -0.844328 0.535827 0 0 0 0
movew -0.809017 0.587785 0 0 0 0
movew -0.770513 0.637424 0 0 0 0
movew -0.728969 0.684547 0 0 0 0
movew -0.684547 0.728969 0 0 0 0
movew -0.637424 0.770513 0 0 0 0
movew -0.587785 0.809017 0 0 0 0
movew -0.535827 0.844328 0 0 0 0
movew -0.481754 0.876307 0 0 0 0
movew -0.425779 0.904827 0 0 0 0
movew -0.368125 0.929776 0 0 0 0
movew -0.309017 0.951057 0 0 0 0
movew -0.248690 0.968583 0 0 0 0
movew -0.187381 0.982287 0 0 0 0
movew -0.125333 0.992115 0 0 0 0
movew -0.062791 0.998027 0 0 0 0
movew 0.000000 1.000000 0 0 0 0
run
EOF

echo "set title '$title' ; set size ratio -1; plot 'outp' using 2:3 with linespoints title 'XY'" | gnuplot -persist

echo "set title '$title' ; plot 'outv' using 1:2 title 'X Velocity', '' using 1:3 title 'Y Velocity'" | gnuplot -persist

cat <<EOF
This shows a plot of small-increment motion around a circle in one plot,
and X and Y velocities v. time in the other plot.
Hit 'q' to quit the displays, 'ENTER' to continue...
EOF
read input

exit 0
